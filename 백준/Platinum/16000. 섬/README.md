# [Platinum II] 섬 - 16000 

[문제 링크](https://www.acmicpc.net/problem/16000) 

### 성능 요약

메모리: 643156 KB, 시간: 1224 ms

### 분류

단절점과 단절선(articulation), 그래프 이론(graphs), 그래프 탐색(graph_traversal)

### 문제 설명

<p>자가용 비행기로 태평양 한복판을 비행하던 튜브는, 연료 부족으로 외딴섬 한가운데에 불시착하고 말았다! 다행히도, 튜브는 섬 근방의 지역에 대한 정보가 전부 나와있는 <em>N</em> × <em>M</em> 격자 모양의 지도를 발견하였다.</p>

<p>튜브가 발견한 지도에서, 격자의 각 셀은 전부 바다이거나 육지이며, 최외곽에 있는 셀들은 모두 바다이다. 엄밀하게 정의해서, 격자의 각 셀은 (<em>x</em>, <em>y</em>) (1 ≤ <em>x</em> ≤ <em>N</em>, 1 ≤ <em>y</em> ≤ <em>M</em>) 형태의 좌표로 표현되며, <em>x</em> = 1, <em>x</em> = <em>N</em>, <em>y</em> = 1, <em>y</em> = <em>M</em> 중 하나의 식이라도 만족하는 셀 (<em>x</em>, <em>y</em>)는 바다임이 보장된다. 모든 육지 셀은 어떠한 <strong>섬</strong>의 일부분인데, 두 육지 셀이 인접하다면 (한 면을 맞닿고 있다면) 이들은 하나의 섬으로 간주된다. 다른 말로, (<em>x</em>, <em>y</em>)와 (<em>x</em>+1, <em>y</em>)가 모두 육지 셀이면 둘은 같은 섬에 속하고, (<em>x</em>, <em>y</em>)와 (<em>x</em>, <em>y</em>+1)이 모두 육지 셀이면 이 둘 역시 같은 섬에 속한다.</p>

<p>튜브는 현재 위치에서 뗏목을 주웠고, 이 뗏목을 타고 저 멀리 망망대해로 먼 여정을 떠날 예정이다. 튜브는 임의의 셀에서 인접한 4방향의 셀로 이동할 수 있으며, 이동 시에는 해당 셀이 육지인지 바다인지의 여부는 중요하지 않다 (뗏목을 주웠으니까!). 튜브의 목표는 현재의 위치에서 이러한 이동을 통해 저 멀리 바다에서 연료를 찾아 돌아오는 것이다.</p>

<p>하지만 튜브는 두 가지 문제점에 봉착해 있다. 첫 번째 문제는, 튜브가 불시착한 지역에 있는 섬 중 하나의 섬에는 오리를 잡아먹으려 하는 무서운 사냥꾼들이 살고 있다. 튜브가 현재 있는 섬은 안전함을 확인했으나, 만약 탈출 시 사냥꾼이 있는 섬을 지나야 만 한다면 튜브는 큰 위험에 처하게 된다! 두 번째 문제는, 튜브가 현재 지도 상의 어느 섬에 있는지를 알지 못한다는 것이다. 튜브가 있는 섬은 최외곽의 바다와 바로 인접해있는 편리한 곳일 수도 있으나, 다른 섬들에 층층이 둘러싸인 위험한 곳일 수도 있다.</p>

<p>튜브는 지도상의 모든 섬에 대해서 해당 섬이 안전한지 위험한지를 알고 싶어 한다. 어떠한 섬 <em>S </em>가 위험하다는 것은, <em>S </em>에서 최외곽 셀로 가기 위해서 무조건 지나야 하는 <em>S </em>와는 다른 섬 <em>T </em>가 존재한다는 것이고, <em>S </em>가 안전하다는 것은 <em>S </em>가 위험하지 않다는 것을 뜻한다. 튜브를 도와서, 지도상에 있는 섬들 중 안전한 섬이 무엇이고 위험한 섬이 무엇인지 알려주자!</p>

### 입력 

 <p>첫 번째 줄에는 격자의 크기 <em>N</em>, <em>M </em>이 공백으로 구분되어 주어진다. (3 ≤ <em>N</em>, <em>M</em> ≤ 2,000)</p>

<p>이후 <em>N </em>개의 줄에 길이 <em>M </em>의 문자열이 주어진다. 이 중 <em>i </em>번째 줄의 <em>j </em>번째 문자는 (<em>i</em>, <em>j</em>) 셀의 상태를 나타내는데, 만약 이 문자가 '<code>#</code>'이라면 해당 셀은 육지이고, '<code>.</code>'이라면 해당 셀은 바다이다. 문자열 내에서 이 외의 문자는 주어지지 않음이 보장된다. </p>

<p>격자 안에는 하나 이상의 육지 셀이 존재함이 보장된다.</p>

### 출력 

 <p><em>N </em>개의 줄에 길이 <em>M </em>의 문자열을 출력하라. 이 중 <em>i </em>번째 줄의 <em>j </em>번째 문자는 (<em>i</em>, <em>j</em>) 셀의 상태를 나타내어야 한다. 만약 (<em>i</em>, <em>j</em>) 셀이 바다라면 해당 위치에 '<code>.</code>'을 출력해야 하고, 안전한 섬의 일부라면 해당 위치에 '<code>O</code>'를 출력해야 하고, 위험한 섬의 일부라면 해당 위치에 '<code>X</code>'를 출력해야 한다.</p>

