# [Platinum III] 문제집 만들기 - 17230 

[문제 링크](https://www.acmicpc.net/problem/17230) 

### 성능 요약

메모리: 19568 KB, 시간: 184 ms

### 분류

자료 구조(data_structures), 해시를 사용한 집합과 맵(hash_set), 세그먼트 트리(segtree)

### 문제 설명

<p>민규는 요즘 알고리즘 과외를 받고 있다. 민규에게는 매우 무서운 과외 선생님 준표가 있는데, 준표는 민규에게 매일 문제집을 한 권씩 만들어주려고 한다. 준표가 생각하기에 몇몇 문제는 민규가 처음부터 풀기엔 너무 어렵기 때문에 문제 간의 관계를 정리하여 표로 남겨두고자 한다.</p>

<p>예를 들어, <em>a</em>번 문제를 풀기 위해 <em>b</em>번 문제를 먼저 풀어야 한다면 <em>a b</em>로 기술한다. 문제집을 만드는 중간에 생각이 바뀌면 준표는 표를 수정할 수 있으며, <em>a</em>번을 풀기 위해선 <em>b</em>번을 풀어야 하는 동시에 <em>b</em>번을 풀기 위해선 <em>a</em>번을 풀어야 하는 모순된 상황이 없도록 주의하며 작성한다.</p>

<p>준표는 <em>x</em>번부터 <em>y</em>번까지의 문제들로 문제집을 만들었을 때 민규가 처음부터 끝까지 문제집을 전부 풀 수 있는지 알고 싶다. 하지만 준표는 APC 준비 때문에 너무 바빠서 이 작업을 할 시간이 없다. 바쁜 준표를 위해 프로그램을 작성해주자.</p>

### 입력 

 <p>첫 번째 줄에 문제의 수 <em>N</em>, 문제 간의 관계의 수 <em>M</em>, 작업 횟수 <em>Q </em>가 주어진다.</p>

<p>두 번째 줄부터 <i>M</i>+1번째 줄까지 두 정수 <em>a b</em>가 주어진다. 이는 <em>a</em>번 문제를 풀기 위해선 <em>b</em>번 문제를 먼저 풀어야 한다는 관계를 표에 추가한다는 의미이다. 동일한 관계는 중복해서 입력되지 않는다.</p>

<p><em>M</em>+2번째 줄부터 <i>Q </i>개의 줄에 걸쳐 아래 세 종류의 입력이 <em>w</em>, <em>x</em>, <em>y</em> 순으로 주어진다.</p>

<ul>
	<li>1 <em>x y</em> : <em>x</em>번부터 <em>y</em>번까지의 문제들로 구성된 문제집을 민규에게 준다. ( <em>x</em> ≤ <em>y</em> )</li>
	<li>2 <em>x y</em> : <em>x</em>번 문제를 풀기 위해선 <em>y</em>번 문제를 먼저 풀어야 한다는 관계를 표에서 지운다. 삭제되는 관계는 표에 존재하는 관계만 주어진다.</li>
	<li>3 <em>x y</em> : <em>x</em>번 문제를 풀기 위해선 <em>y</em>번 문제를 먼저 풀어야 한다는 관계를 표에 추가한다. 생성되는 관계는 표에 존재하지 않는 관계만 주어진다.</li>
</ul>

<p>모순된 상황이 발생하는 입력은 주어지지 않는다.</p>

### 출력 

 <p>1 <em>x y</em> 의 입력이 들어왔을 때, 민규가 현재 <em>x</em>번부터 <em>y</em>번까지의 문제들로 구성된 문제집을 전부 풀 수 있으면 <code>"YES"</code>, 그렇지 않다면 <code>"NO"</code>를 출력하라.</p>

